# Document Data

## INGREDIENTS OF DOCUMENT&#x20;

Document is divided into 2 data storage components:&#x20;

* Controls outside the table (controls)
* Controls inside the table (table controls)

![](<../../.gitbook/assets/image (93).png>)

## DOCUMENTS DATA STRUCTURE&#x20;

### Doc's principles of database creation&#x20;

Doc x\_lsx like the example in item 1, when saved, the system will automatically create a database with the table structure (Data Table) as follows.

| Data table name            | **Detail**                                                                                                                            |
| -------------------------- | ------------------------------------------------------------------------------------------------------------------------------------- |
| `document_x_lsx`           | The generated main data table will store the data information of the doc with columns that are controls outside the table (controls). |
| `document_child_x_lsx_tb1` | The data table stores the data information of the doc with columns that are controls located in tb1                                   |
| `document_child_x_lsx_tb2` | The data table stores the data information of the doc with columns that are controls located in tb2                                   |
| `document_child_x_lsx_tb3` | The data table stores the data information of the doc with columns that are controls located in tb3                                   |

### Principles of creating views

&#x20;View is a virtual table that contains SQL query structure from real tables. Similar to a table, a view contains many rows and columns.&#x20;

For doc x\_lsx created with a structure like the example in item 1 (including controls outside the table, the corresponding tables are tb1, tb2, tb3) the system will generate Views (tables that store virtual data ) as follows:

| **STT** | **View**    | **Cấu trúc view**                                                                                                                                                                                                                                              |
| ------- | ----------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| 1       | `x_lsx`     | The view is created by full joining all the fields of the primary and secondary data tables in the system (`document_x_lsx`, `document_child_x_lsx_tb1`, `document_child_x_lsx_tb2`, document\_child\_x\_lsx\_tb3) linked through the `parent_object_id` field |
| 2       | `x_lsx_tb1` | The view is generated by left joining the data of `document_child_x_lsx_tb1` and the table `document_x_lsx` is linked through the `parent_object_id` field                                                                                                     |
| 3       | `x_lsx_tb2` | The view is generated by left joining the data of `document_child_x_lsx_tb2` and the table `document_x_lsx` is linked through the `parent_object_id` field                                                                                                     |
| 4       | `x_lsx_tb3` | The view is generated by left joining the data of `document_child_x_lsx_tb3` and the table `document_x_lsx` is linked through the `parent_object_id` field                                                                                                     |

### Query method

To process data on the doc, you can directly query the views generated from the doc. (depending on the actual business, how to choose the query for data accuracy)&#x20;

The generated views may have duplicate data due to the join structure in the database.&#x20;

* To avoid data duplication in the table controls, the BA can query views 2, 3, 4 depending on the logic to query the data of which table control.&#x20;
* To avoid duplication of data outside the table, BA can query on view number 1&#x20;
* View number 2 can be used for quick access, but for docs with 2 or more table controls, the data in view 2 will be duplicated due to SYQL's full join structure.

Example of using SYQL in query data

{% content-ref url="../../formula/untitled.md" %}
[untitled.md](../../formula/untitled.md)
{% endcontent-ref %}

**Learning Join in SQL**

{% content-ref url="../../formula/sql-basic.md" %}
[sql-basic.md](../../formula/sql-basic.md)
{% endcontent-ref %}
